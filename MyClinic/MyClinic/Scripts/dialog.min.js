var $dialogAlert = {
    strContainer: ".tableList",
    strWidth: "450",
    strInterestRate: "",
    strSuccessUpdate: "",

    setWidth: function (strVal) {
        $dialogAlert.strWidth = strVal;
    },
    /*==========================Init Template Dialog==========================*/
    initTemplate: function () {
        var strConfirm = '<div id="dialog-confirm" title="Message"></div>';
        var strMessage = '<div id="dialog-message" title="Confirm"></div>';
        $("body").append(strConfirm + strMessage);
    },
    /*==========================Init Message Dialog==========================*/
    initMessage: function (strMsg) {
        strTitle = $msg.message;
        if (typeof strMsg == "undefined") strMsg = "Your request is success.";
        var objDialog = $("#dialog-message").dialog({
            modal: true,
            title: strTitle,
            closeOnEscape: false,
            resizable: false,
            autoOpen: true,
            width: $dialogAlert.strWidth,
            buttons: {
                Close: function () {
                    $(this).dialog("close");
                }
            },
            open: function (event, ui) {
                $('.ui-dialog-buttonset button:first-child').html($msg.close);
                $(event.target).dialog('widget')
                    .css({ position: 'fixed' })
                    .position({ my: 'center', at: 'center', of: window });
                $(".ui-dialog-titlebar-close", ui.dialog || ui).hide();
            }
        });
        objDialog.html(strMsg);
    },
    /*==========================Confirm Dayend Close ============================*/
    confirmDayendClose: function (strType, strTitle, strMsg, strUrl) {
        if (typeof strType == "undefined") strType = "delete";
        if (typeof strTitle == "undefined") strTitle = "Message";
        if (typeof strMsg == "undefined") strMsg = "Are you sure to delete this record?";
        var objDialog = $("#dialog-confirm").dialog({
            modal: true,
            title: strTitle,
            closeOnEscape: false,
            resizable: false,
            autoOpen: true,
            width: $dialogAlert.strWidth,
            buttons: {
                Yes: function () {
                    $Common.setRedirectPage(strUrl);
                    $(this).dialog("close");
                },
                No: function () {
                    $(this).dialog("close");
                }
            },
            open: function (event, ui) {
                $('.ui-dialog-buttonset button:first-child').html($msg.yes);
                $('.ui-dialog-buttonset button:last-child').html($msg.no);
                $(event.target).dialog('widget')
                    .css({ position: 'fixed' })
                    .position({ my: 'center', at: 'center', of: window });
                $(".ui-dialog-titlebar-close", ui.dialog || ui).hide();
                if (this.title == "") {
                    $(".ui-dialog-title").html($msg.message);
                }
            }
        });
        objDialog.html(strMsg);
    },

    /*==========================Confirm Backup============================*/
    confirmBackup: function (strType, strTitle, strMsg, strUrl) {
        if (typeof strType == "undefined") strType = "delete";
        if (typeof strTitle == "undefined") strTitle = "Message";
        if (typeof strMsg == "undefined") strMsg = "Are you sure to delete this record?";
        var objDialog = $("#dialog-confirm").dialog({
            modal: true,
            title: strTitle,
            closeOnEscape: false,
            resizable: false,
            autoOpen: true,
            width: $dialogAlert.strWidth,
            buttons: {
                Yes: function () {
                    $dialogAlert.tranBackup(strUrl);
                    $(this).dialog("close");
                },
                No: function () {
                    $(this).dialog("close");
                }
            },
            open: function (event, ui) {
                $('.ui-dialog-buttonset button:first-child').html($msg.yes);
                $('.ui-dialog-buttonset button:last-child').html($msg.no);
                $(event.target).dialog('widget')
                    .css({ position: 'fixed' })
                    .position({ my: 'center', at: 'center', of: window });
                $(".ui-dialog-titlebar-close", ui.dialog || ui).hide();
                if (this.title == "") {
                    $(".ui-dialog-title").html($msg.message);
                }
            }
        });
        objDialog.html(strMsg);
    },
    /*============For Backup Record=================*/
    tranBackup: function (strUrl, key) {
        $.ajax({
            url: strUrl,
            async: true,
            cache: false,
            type: "POST",
            dataType: "json",
            data: {
                value: key
            },
            error: function () {
                console.log("Unexcepted Error");
            },
            success: function (responseText) {
                obj = responseText;
                strID = obj.Id;
                strID = "#" + strID;
                if (obj.result == "success") {
                    var url = $Common.concatHostUrl('/Backup');
                    $Common.setRedirectPage(url);
                    //$dialogAlert.initMessageForBack("Record have been Backup.");

                    //$(strID).remove();
                }
            }
        });
    },
    /*==========================Init Message Dialog For Backup==========================*/
    initMessageForBack: function (strMsg) {
        if (typeof strTitle == "undefined") strTitle = "Message";
        if (typeof strMsg == "undefined") strMsg = "Your request is success.";
        strUrlHome = $Common.concatHostUrl('/Home/Index');
        var objDialog = $("#dialog-message").dialog({
            modal: true,
            title: strTitle,
            closeOnEscape: false,
            resizable: false,
            autoOpen: true,
            width: $dialogAlert.strWidth,
            buttons: {
                Close: function () {
                    $(this).dialog("close");
                    $Common.setRedirectPage(strUrlHome);
                }
            },
            open: function (event, ui) {
                $(event.target).dialog('widget')
                    .css({ position: 'fixed' })
                    .position({ my: 'center', at: 'center', of: window });
                $(".ui-dialog-titlebar-close", ui.dialog || ui).hide();
            }
        });
        objDialog.html(strMsg);
    },
    /*========================== Confirm Delete Dialog ==========================*/
    confirmDelete: function (strType, strTitle, strMsg, strUrl) {
        if (typeof strType == "undefined") strType = "delete";
        if (typeof strTitle == "undefined") strTitle = "Message";
        if (typeof strMsg == "undefined") strMsg = "Are you sure to delete this record?";
        var objDialog = $("#dialog-confirm").dialog({
            modal: true,
            title: strTitle,
            closeOnEscape: false,
            resizable: false,
            autoOpen: true,
            width: $dialogAlert.strWidth,
            buttons: {
                Yes: function () {
                    $dialogAlert.tranDelete(strUrl);
                    $(this).dialog("close");
                },
                No: function () {
                    $(this).dialog("close");
                }
            },
            open: function (event, ui) {
                $('.ui-dialog-buttonset button:first-child').html($msg.yes);
                $('.ui-dialog-buttonset button:last-child').html($msg.no);
                $(event.target).dialog('widget')
                    .css({ position: 'fixed' })
                    .position({ my: 'center', at: 'center', of: window });
                $(".ui-dialog-titlebar-close", ui.dialog || ui).hide();
                if (this.title == "") {
                    $(".ui-dialog-title").html($msg.message);
                }
            }
        });
        objDialog.html(strMsg);
    },
    /*============For Delete Record=================*/
    tranDelete: function (strUrl, key) {
        $.ajax({
            url: strUrl,
            async: true,
            cache: false,
            type: "POST",
            dataType: "json",
            data: {
                value: key
            },
            error: function () {
                console.log("Unexcepted Error");
            },
            success: function (responseText) {
                obj = responseText;
                strID = obj.Id;
                strID = "#" + strID;
                if (obj.result == "success") {
                    $dialogAlert.initMessage($msg.messageSuccessDelete);
                    $(strID).remove();
                }
                else if (obj.result == "failure") {
                    $dialogAlert.initMessage(obj.strName + $msg.messageFailureDelete + obj.strUsed);
                }
            }
        });
    },
    /*========================== confirm UpdateRate Dialog==========================*/
    confirmUpdateRate: function (strType, strTitle, strMsg, strUrl) {
        if (typeof strType == "undefined") strType = "update";
        if (typeof strTitle == "undefined") strTitle = "Update";
        if (strMsg == "") strMsg = '<p style="float: left; width: 34%;color:rgb(62, 144, 26);">' + $dialogAlert.strInterestRate + '(%)</p><input id="txtInterestRate" type="text" style="width: 57%;"><div class="error"><span style="margin-left:-36px;"></span></div>';
        var objDialog = $("#dialog-confirm").dialog({
            modal: true,
            title: strTitle,
            closeOnEscape: false,
            resizable: false,
            autoOpen: true,
            width: $dialogAlert.strWidth,
            buttons: {
                Yes: function () {
                    if ($transaction.initCheckInterestBox("#txtInterestRate")) {
                        $dialogAlert.tranUpdateRate();
                        $(this).dialog("close");
                    }
                },
                No: function () {
                    $(this).dialog("close");
                }
            },
            open: function (event, ui) {
                $('.ui-dialog-buttonset button:first-child').html($msg.yes);
                $('.ui-dialog-buttonset button:last-child').html($msg.no);
                $(event.target).dialog('widget')
                    .css({ position: 'fixed' })
                    .position({ my: 'center', at: 'center', of: window });
                $(".ui-dialog-titlebar-close", ui.dialog || ui).hide();
                if (this.title == "") {
                    $(".ui-dialog-title").html($msg.message);
                }
            }
        });
        objDialog.html(strMsg);
        $transaction.initOnlyNumber("#txtInterestRate");
    },

    /*============For UpdateRate Record=================*/
    tranUpdateRate: function () {
        var interestRate = $('#txtInterestRate').val();
        var id = [];
        var idList = '';
        $(':checkbox:checked').each(function (i) {
            id[i] = $(this).val();
            idList += $(this).val() + '|';
        });
        if (idList.length > 0) {
            idList = idList.replace('on|', '');
            idList = idList.substring(0, idList.length - 1);
        }
        //console.log(idList);
        if (id.length > 0) {
            url = host + "/Item/UpdateRate";
            $.ajax({
                url: url,
                async: true,
                cache: false,
                type: "POST",
                dataType: "json",
                data: { idList: idList, interestRate: interestRate },

                error: function () {
                    console.log("Error");
                },
                success: function (responseText) {
                    if (responseText.result == "success") {
                        $dialogAlert.initMessage($dialogAlert.strSuccessUpdate);
                        $common.SearchItemForRefreshRate();
                        $("#rate").css("display", "none");
                        $("#rate").css("background-color", "white");
                    }
                }
            });
        }

    },
    /*For Item And ItemCategory*/
    /*========================== Confirm Delete Dialog ==========================*/
    confirmUpdateStatusForItemAndItemCategory: function (strType, strTitle, strMsg, strUrl) {
        if (typeof strType == "undefined") strType = "delete";
        if (typeof strTitle == "undefined") strTitle = "Message";
        if (typeof strMsg == "undefined") strMsg = "Are you sure to delete this record?";
        var objDialog = $("#dialog-confirm").dialog({
            modal: true,
            title: strTitle,
            closeOnEscape: false,
            resizable: false,
            autoOpen: true,
            width: $dialogAlert.strWidth,
            buttons: {
                Yes: function () {
                    $dialogAlert.UpdateStatusForItemAndItemCategory(strUrl);
                    $(this).dialog("close");
                },
                No: function () {
                    $(this).dialog("close");
                }
            },
            open: function (event, ui) {
                $(event.target).dialog('widget')
                    .css({ position: 'fixed' })
                    .position({ my: 'center', at: 'center', of: window });
                $(".ui-dialog-titlebar-close", ui.dialog || ui).hide();
                if (this.title == "") {
                    $(".ui-dialog-title").html($msg.messageDelete);
                }
            }
        });
        objDialog.html(strMsg);
    },
    /*============For Delete Record=================*/
    UpdateStatusForItemAndItemCategory: function (strUrl, key) {
        $.ajax({
            url: strUrl,
            async: true,
            cache: false,
            type: "POST",
            dataType: "json",
            data: {
                value: key
            },
            error: function () {
                console.log("Unexcepted Error");
            },
            success: function (responseText) {
                obj = responseText;
                strID = obj.Id;
                strID = "#" + strID;
                if (obj.result == "success") {
                    $dialogAlert.initMessage("Record have been deleted.");
                    $Common.setRedirectPage(obj.url);
                }
            }
        });
    },
    /*End For Item And ItemCategory*/

    /*==========================Init Confirm Dialog==========================*/
    /*Step Two*/
    initConfirm: function (strValue, strType, strUrl, strTitle, strMsg) {
        if (typeof strType == "undefined") strType = "delete";
        if (typeof strTitle == "undefined") strTitle = "Confirm";
        if (typeof strMsg == "undefined") strMsg = "Are you sure to do this request?";
        var objDialog = $("#dialog-confirm").dialog({
            modal: true,
            title: strTitle,
            closeOnEscape: false,
            resizable: false,
            autoOpen: true,
            width: $dialogAlert.strWidth,
            buttons: {
                Yes: function () {
                    $dialogAlert.transactionConfirm(strValue, strType, strUrl);
                    $(this).dialog("close");
                },
                No: function () {
                    $(this).dialog("close");
                }
            },
            open: function (event, ui) {
                $(event.target).dialog('widget')
                    .css({ position: 'fixed' })
                    .position({ my: 'center', at: 'center', of: window });
                $(".ui-dialog-titlebar-close", ui.dialog || ui).hide();
            }
        });
        objDialog.html(strMsg);
    },
    /*==========================Init Event For Delete Record==========================*/
    initBindEventDeleteRecord: function (strID, strContainer) {
        if (typeof strID == "undefined") strID = ".delete-action";
        if (typeof strContainer == "undefined") strContainer = ".tableList";
        strID = strContainer + " " + strID;
        var strType = "delete";
        if ($common.checkDom(strID)) {
            $(strID).each(function () {
                $(this).bind("click", function () {
                    var strValue = $(this).data("value");
                    var strUrl = $(this).data("url");
                    $dialogAlert.strContainer = strContainer;
                    $dialogAlert.initConfirm(strValue, strType, strUrl);
                    return false;
                });
            });
        }
    },
    /*=========For bind event for action on record===========*/
    /*Step One*/
    initBindEventRecord: function (strID, strContainer) {
        if (typeof strID == "undefined") strID = ".record-action";
        if (typeof strContainer == "undefined") strContainer = ".tableList";
        strID = strContainer + " " + strID;
        if ($common.checkDom(strID)) {
            $(strID).each(function () {
                $(this).bind("click", function () {
                    var strValue = $(this).data("value");
                    var strUrl = $(this).data("url");
                    var strTitle = $(this).data("title");
                    var strMsg = $(this).data("msg");
                    var strType = $(this).data("type");
                    $dialogAlert.strContainer = strContainer;
                    $dialogAlert.initConfirm(strValue, strType, strUrl, strTitle, strMsg);
                    return false;
                });
            });
        }
    },
    /*Step Three*/
    transactionConfirm: function (strValue, strType, strUrl) {
        if ($common.checkNetConnection()) {
            $.ajax({
                url: strUrl,
                async: true,
                cache: false,
                type: "POST",
                dataType: "json",
                data: {
                    value: strValue
                },
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    $common.setHiddenActionPage();
                    $dialogAlert.initMessage("System have a unexpected Error, please refresh this page to do again.");
                },
                beforeSend: function () {
                    $common.setShowActionPage();
                },
                success: function (responseText) {
                    var strRecord = "#" + strValue;
                    var strMessageDetail = "Your request is fail.";
                    if (responseText.resultMsg == "succ") {
                        var strMessageDetail = "Your request is success.";
                        if (strType == "delete") {
                            $common.removeDom($dialogAlert.strContainer + " " + strRecord);
                            if ($common.checkNotEmpty(responseText.resultDetail)) {
                                strMessageDetail = responseText.resultDetail;
                            }
                            $dialogAlert.initMessage(strMessageDetail);
                        } else if (strType == "stop") {
                            $common.removeDom($dialogAlert.strContainer + " " + strRecord);
                            $dialogAlert.initMessage(responseText.resultDetail);
                            setTimeout(function () {
                                $common.setRefreshPage();
                            }, 2000);
                        } else if (strType == "enable") {
                            $common.removeDom($dialogAlert.strContainer + " " + strRecord);
                            $dialogAlert.initMessage(responseText.resultDetail);
                            setTimeout(function () {
                                $common.setRefreshPage();
                            }, 2000);
                        }
                    } else {
                        if ($common.checkNotEmpty(responseText.resultDetail)) {
                            strMessageDetail = responseText.resultDetail;
                        }
                        $dialogAlertAlert.initMessage(strMessageDetail);
                    }
                },
                complete: function () {
                    $common.setHiddenActionPage();
                }
            });
        }
    }
};


            